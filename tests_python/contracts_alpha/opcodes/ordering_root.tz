# This contract intends to call "opcodes/ordering_mix_dfs_bfs_grandparent.tz".
# and control whether to permit it to run in DFS or not.

{ parameter
    (pair (list (pair (pair (list (pair (pair string address) (pair bool bool))) address) (pair bool bool)))
          (pair address bool)) ;
  storage unit ;
  code { CAR ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         SWAP ;
         DUP ;
         CDR ;
         SWAP ;
         CAR ;
         CONTRACT
           (list (pair (pair (list (pair (pair string address) (pair bool bool))) address) (pair bool bool))) ;
         IF_NONE { PUSH string "Not a contract" ; FAILWITH } {} ;
         SWAP ;
         IF { PUSH mutez 0 ; DIG 2 ; TRANSFER_TOKENS ; ALLOW_DFS }
            { PUSH mutez 0 ; DIG 2 ; TRANSFER_TOKENS } ;
         PUSH unit Unit ;
         NIL operation ;
         DIG 2 ;
         CONS ;
         PAIR } }
